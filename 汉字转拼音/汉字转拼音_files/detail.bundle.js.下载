!function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],u=0,m=[];u<s.length;u++)o=s[u],i[o]&&m.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(d&&d(e);m.length;)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},i={2:0},r=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.p=window.SF.staticUrl||o.p;var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([76,0]),a()}({0:function(t,e){t.exports=jQuery},76:function(t,e,a){"use strict";a.r(e);a(11);var n=a(0),i=a(2),r=a(6),o=a(3),s=a(1);a(77),a(25),a(26),a(27);n(function(){i.a.watch(),s.v.runCommonFun(),s.v.imageView(),Object(s.n)(n("article")),n(".article.fmt").find("code").length&&Object(s.o)(n(".article.fmt")),Object(s.p)(),new s.b(n("nav[data-article-nav-list]"),n("article.article-content")),i.b.add(r.b,r.e,r.a,r.d,o.k),new s.f(n(".functional-area-bottom"),{isColumn:!1,btns:["mainLike","mainBookmark","reward","share"]}),new s.f(n(".functional-area-left"),{isColumn:!0,btns:["mainLike","mainBookmark","comment","share"]}),location.hash.includes("shareToWeibo")&&n(".functional-area-bottom .share_weibo").trigger("click"),(new s.c).$("#sf-article_author").moveAfter("#sf-article_title").$("#sf-article_metas").removeClass("col-6").addClass("pl-2").$("#sf-article > .row > .col-12 > .card, #sf-article > .row > .col-12 > .w-xl-300 > .card, #comment-area > .card").addClass("rounded-0").removeClass("mb-4").addClass("mb-1").$("#sf-article > .row > .col-12 > .card > .card-body, #sf-article > .row > .col-12 > .w-xl-300 > .card > .card-body, #comment-area > .card > .card-body").addClass("p-3").$("#sf-article > .row > .col-12").addClass("p-0").$("#paradigm-article-related .list-group-item").addClass("p-3").$("#comment-area > .justify-content-between, #sf-article > .row > .col-12 > h5").addClass("px-3").$(".blog").moveAfter("#sf-article > .row > .col-12:nth-child(1) > .card:nth-child(1)").$("article.article img").change(function(t){t.each(function(){var t=this.getAttribute("src"),e=this.getAttribute("data-src"),a="";if(t=e||t){var n=t.indexOf("?");n>0&&(a=t.substring(n),t=t.substring(0,n)),t.match(/^\/img\//)&&!t.match(/\/view$/)&&(t=t+"/view"+a,this.setAttribute(e?"data-src":"src",t))}})},function(t){t.each(function(){var t=this.getAttribute("src"),e=this.getAttribute("data-src"),a="";if(t=e||t){var n=t.indexOf("?");n>0&&(a=t.substring(n),t=t.substring(0,n)),t.match(/^\/img\//)&&t.match(/\/view$/)&&(t=t.substring(0,t.length-5)+a,this.setAttribute(e?"data-src":"src",t))}})}).listen("#comment-area, #paradigm-article-related"),s.v.backtopInit(),Object(s.s)({$parent:n("footer").find(".shareContent"),tip:!1,icons:["weixin","weibo","github","twitter"]}),n("footer .dropdown-item").removeClass("dropdown-item"),n('[data-toggle="tooltip"]').tooltip(),Object(s.u)("");var t=null;if(n("#SFEventObject").length){var e=JSON.parse(document.getElementById("SFEventObject").getAttribute("value")).current[1];t=Array.isArray(e)?e[0]:e}new s.e(n("#comment-area"),t),n(document).on("submit",function(t){if(13==t.keyCode)return!1}),setTimeout(function(){s.v.eventJump()},1e3),n("textarea[autoHeight]").atwho({at:"@",callbacks:{remote_filter:function(t,e){var a=window.ARTICLE.articleId;if(t){if(t)return n.getJSON("/api/users/search",{q:t},function(t){t.status||e(t.data)})}else if(a.toString().match(/^11|^12|^13/))return n.getJSON("/api/users/search",{objectId:a},function(t){t.status||e(t.data)})},tpl_eval:function(t,e){return'<li data-value="@'+e.name+"["+e.slug+']">'+(e.avatarUrl?'<img class="avatar-24 mr-2" src="'+e.avatarUrl+'" />':"")+'<span class="font-size-14">'+e.name+"</span> &nbsp; <small>@"+e.slug+"</small></li>"}}}),n.get("/api/article/"+window.ARTICLE.articleId+"/related",function(t){var e=t.status,a=t.data;if(!e&&a.length>0){var i="",r=s.v.isMobile("any");a.forEach(function(t){i+='<a href="'+t.url+'?utm_source=sf-related" '+(r?"":' target="_blank"')+'\n                                class="list-group-item list-group-item-action py-3">\n                                <h5 class="text-body">'+t.title+'</h5>\n                                <p class="mb-2 text-truncate text-secondary">'+t.excerpt+'</p>\n                                <p class="text-secondary mb-0 font-size-14">\n                                    <span class="text-primary">'+t.user.name+'</span>\n                                    <span class="split-dot"></span> 阅读 '+t.viewsWord+"\n                                    "+(t.votes>0?'<span class="split-dot"></span> '+t.votes+" 赞":"")+"\n                                    "+(t.comments>0?'<span class="split-dot"></span> '+t.comments+" 评论":"")+"\n                                </p>\n                            </a>"}),n("#paradigm-article-related").html(i)}}),n(document).on("click",".mainLike, .mainLike-comment",function(){var t=n(this),e=n(this).hasClass("mainLike-comment")?"comment":"article";t.hasClass("active")?n.post("/api/"+e+"/"+t.data("id")+"/like/cancel",function(a){var i=a.status,r=a.data;if(0===i)"article"==e&&(n(".mainLike").removeClass("active"),n(".mainLikeNum").text(~~r?~~r:""),n(".functional-area-bottom").find(".mainLikeNum").prev().text("赞")),"comment"==e&&(t.removeClass("active").empty().append('<i class="far fa-thumbs-up mr-1"></i>'),t.next(".mainLike-commentNum").text(~~r?~~r:""));else{if("remote"==r[0])return new s.i,!1;if("login"==r[0])return new s.g,!1;if("unactivated"===r[0])return new s.k({isTip:!0,title:"提示",footer:'<button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button><a class="btn btn-primary" href="/user/binding" role="button">前往激活</a>',content:"你的账号暂未激活"}).show(),!1;new s.k({title:"",isTip:!0,content:Array.isArray(r[1])?r[1][1]:r[1]}).show()}}):n.post("/api/"+e+"/"+t.data("id")+"/like",function(a){var i=a.status,r=a.data;if(0===i)"article"==e&&(n(".mainLike").addClass("active"),n(".mainLikeNum").text(r),n(".functional-area-bottom").find(".mainLikeNum").prev().text(~~r?"已赞":"赞")),"comment"==e&&(t.addClass("active").empty().append('<i class="fas fa-thumbs-up mr-1"></i>'),t.next(".mainLike-commentNum").text(r));else{if("remote"==r[0])return new s.i,!1;if("login"==r[0])return new s.g,!1;if("unactivated"===r[0])return new s.k({isTip:!0,title:"提示",footer:'<button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button><a class="btn btn-primary" href="/user/binding" role="button">前往激活</a>',content:"你的账号暂未激活"}).show(),!1;new s.k({title:"",isTip:!0,content:Array.isArray(r[1])?r[1][1]:r[1]}).show()}})}),s.a.adClose("article"),document.querySelectorAll("article.article").forEach(function(t){t.addEventListener("copy",function(t){if(!n("#SFUserId").length)return new s.g,t.preventDefault(),!1}),function(t,e){var a=!1,n=null;function i(t){a=!0}function r(t){a&&!document.getSelection().isCollapsed&&(e(n=document.getSelection()),a=!1)}function o(t){if(document.getSelection().isCollapsed&&null!==n){e(n=null);var a=document.getElementById("select-tooltip");null!==a&&a.parentNode.removeChild(a)}}var s=function(t){return function(t,e){return void 0===e&&(e=function(t){return t}),function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return t.apply(e)}}(t,function(t){return t.type})};t.addEventListener("selectstart",s(i)),t.addEventListener("mouseup",s(r)),document.addEventListener("selectionchange",s(o)),t.addEventListener("dblclick",s(function(t){}))}(t,function(t){if(!n("#SFUserId").length&&null!==t){var e=t.getRangeAt(0).getBoundingClientRect();console.log(t),console.log("top:",e.top);var a=document.getElementById("select-tooltip");a&&a.remove();var i=document.createElement("div");i.id="select-tooltip",i.classList.add("tooltip","bs-tooltip-top");var r=document.createElement("div");r.classList.add("arrow"),r.style.left="44px";var o=document.createElement("div");o.classList.add("tooltip-inner");var s=document.createTextNode("请登录后复制");o.appendChild(s),i.appendChild(r),i.appendChild(o);var l=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,c=e.top+l,d=e.left+(e.width-100)/2;i.style.top=c-52+"px",i.style.left=d+"px",i.style.zIndex="1040",i.style.background="transparent",i.style.opacity="0.9",document.body.appendChild(i)}})});var a=n("[data-article-nav]").height(),l=n("#article-nav-list a.nav-link").length,c=l>10?309:24*l+68;n("#collapseTarget").collapse({toggle:!1}),n("#collapseTarget").on("show.bs.collapse",function(){n("span.right").addClass("hidden"),n("span.down").removeClass("hidden"),n("[data-article-nav]").is("[data-fix]")&&(n("#first-ad").css({top:c}),n("#second-ad").css({top:c+n("#first-ad").height()}))}),n("#collapseTarget").on("hide.bs.collapse",function(){n("span.right").removeClass("hidden"),n("span.down").addClass("hidden"),n("[data-article-nav]").is("[data-fix]")&&(n("#first-ad").css({top:a}),n("#second-ad").css({top:a+n("#first-ad").height()}))}),n("#sf-header").addClass("sticky-top")})},77:function(t,e,a){}});